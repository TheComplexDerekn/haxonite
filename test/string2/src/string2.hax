// String byte and codepoint iterator functions.

module string2 is

  func main() is
    run("Hello world");
    run("");
    run("Àñé");
    run2("Àñé");
  end

  func run(s: String) is
    write($"'{s}':");
    var i = 0;
    while i < byteLength(s) do
      var c = codepoint(s, i);
      write($" '{c:c}' ({c:02x})");
      i = nextCodepoint(s, i);
    end    
    write("\n");
  end

  func run2(s: String) is
    write($"'{s}':");
    for i : 0 .. byteLength(s) - 1 do
      var b = byte(s, i);
      write($" {b:02x}");
    end    
    write("\n");
  end

end
